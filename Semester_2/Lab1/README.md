# Лабораторная работа 1

Вариант 9:

- MPI: 3а
- OpenMP: 1б


# Результаты:

### Однопоточная программа

- Массив 10000х10000, время: 0.414844 sec
- Массив 20000х20000, время: 2.653406 sec
- Массив 40000х40000, время: 35.887580 sec

### OpenMP, 8 потоков

- Массив 10000х10000, время: 0.100671 sec
- Массив 20000х20000, время: 0.448451 sec
- Массив 40000х40000, время: 10.704162 sec

### MPI, 4 потока

- Массив 10000х10000, время: 0.107180 sec
- Массив 20000х20000, время: 0.467828 sec
- Массив 40000х40000, время: 24.807065 sec*

### MPI, 8 потоков

- Массив 10000х10000, время: 0.113748 sec
- Массив 20000х20000, время: 0.475736 sec
- Массив 40000х40000, время: 19.961383 sec*


MPI здесь потреблял 50 гигабайт виртуальной памяти, что сказалось на результате

### 1б
Исследуем цикл:
a[i][j] = f(a[i+3][j-4])

a[0][4] = f(a[3][0])
a[0][5] = f(a[3][1])
a[0][6] = f(a[3][2])
a[0][7] = f(a[3][3])
a[0][8] = f(a[3][4])
a[0][9] = f(a[3][5])
...
a[1][4] = f(a[4][0])
a[1][5] = f(a[4][1])
a[1][6] = f(a[4][2])
a[1][7] = f(a[4][3])
a[1][8] = f(a[4][4])
a[1][9] = f(a[4][5])
...
a[2][4] = f(a[5][0])
a[2][5] = f(a[5][1])
a[2][6] = f(a[5][2])
a[2][7] = f(a[5][3])
a[2][8] = f(a[5][4])
a[2][9] = f(a[5][5])
...
a[3][4] = f(a[6][0])
a[3][5] = f(a[6][1])
a[3][6] = f(a[6][2])
a[3][7] = f(a[6][3])
a[3][8] = f(a[6][4])
a[3][9] = f(a[6][5])
...

Получается внутри трёх таких блоков можно распараллелить вычисления на любое количество потоков
i = 0..2, 3..5, 6..8, ...
Каждый такой блок должен исполняться по очереди. Внутри блока можно вести вычисления в любом порядке

### 3а
Исследуем цикл:
a[i][j] = f(a[i][j])
Этот цикл допустимо исполнять целиком параллельно.
Далее:
b[i][j] = g(a[i+1][j])
Также допустимо полностью параллельное исполнение этого цикла.

Конечным результатом исполнения программы является массив b. Можно свернуть задачу в один цикл:
b[i][j] = g(f(a[i+1][j]))
Так как это выражение не создаёт побочных эффектов для массива а, все итерации этого цикла допустимо исполнять в любом порядке.

